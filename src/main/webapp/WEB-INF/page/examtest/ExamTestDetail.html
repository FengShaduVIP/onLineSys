<!DOCTYPE html>
<html>
<head>
<title></title>
#parse("sys/header.html")
</head>
<body>
<div id="rrapp" class="layui-container">
	<div class="layui-row">
		<div class="layui-col-xs6">
			<h2>考试名称：</h2>
		</div>
		<div class="layui-col-xs6">
			<div class="layui-inline">
				<input type="text" class="layui-input" id="test1" value="2099-01-01 00:00:00">
			</div>
			<blockquote class="layui-elem-quote" style="margin-top: 10px;">
				<h3>剩余时间：</h3>
				<div id="test2"></div>
			</blockquote>
		</div>
	</div>
	<div class="layui-row">
		<div class="layui-collapse">
			<exam-item :item="item" v-for="item in examList"></exam-item>
		</div>
	</div>
</div>

<script src="${rc.contextPath}/js/examtest/ExamTestDetail.js?_${date.systemTime}"></script>
<script type="text/javascript">
    layui.use(['util','element', 'laydate'], function(){
        var util = layui.util
            ,laydate = layui.laydate;
        //倒计时
        var thisTimer, setCountdown = function(y, M, d, H, m, s){
            var endTime = new Date(y, M||0, d||1, H||0, m||0, s||0) //结束日期
                ,serverTime = new Date(); //假设为当前服务器时间，这里采用的是本地时间，实际使用一般是取服务端的
            clearTimeout(thisTimer);
            util.countdown(endTime, serverTime, function(date, serverTime, timer){
                var str = date[0] + '天' + date[1] + '时' +  date[2] + '分' + date[3] + '秒';
                lay('#test2').html(str);
                thisTimer = timer;
            });
        };
        setCountdown(2099,1,1);
        laydate.render({
            elem: '#test1'
            ,type: 'datetime'
            ,done: function(value, date){
                setCountdown(date.year, date.month - 1, date.date, date.hours, date.minutes, date.seconds);
            }
        });
    });
    function submitItemTest(itemID) {
		vm.sendData.text = document.getElementById(itemID).value;
		vm.sendData.examTestId = id;
		vm.sendData.itemId = itemID;
        $.ajax({
            type: "POST",
            url: "../onlinetest/sumbitItemTest",
            data: JSON.stringify(vm.sendData),
            dataType: "json",
            beforeSend:function () {
				vm.layIndex = 	layer.msg('加载中。。。', {icon: 4,time:100000});
            },
            success: function(r){
                if(r.code === 0){
                    layer.close(vm.layIndex);
                    alert(r.result);
                }else{
                    layer.close(vm.layIndex);
                    alert(r.msg);
                }
            },error:function () {
                layer.close(vm.layIndex);
                alert('服务器出错，请联系管理员');
            }
        });


    }
</script>
</body>
</html>